https://www.cnblogs.com/xiexj/p/7670415.html

在分布式的年代，一个应用需要部署到多台服务器上。那么要查看日志文件咋办？一台台的查？这年头还真有这么干的。多服务器终端交互利器有不少。最流行的是polysh。atnodes据说“去哪儿”在用。

      polysh这种跨机器的，想想就知道需要做多台机器的ssh免密码登陆，比较麻烦，所以建议一个团队用一个公用目录来装，大家统一用这个账户来操作即可。安装和使用方法大家自行百度吧。主要想说的是现在python脚本和shell脚本一样，已经成了程序员的必备技能。

　　而polysh是一种思维方式。如果一件事情你觉得重复麻烦的，必然会有一个工具能代替你做事情。举个例子，刚才提到需要多台机器的ssh免密码登陆。这个时候要所有服务器的autorized_keys文件都要写入polysh所在机器的公钥。那么这时候一定有简单的办法，就是key2nodes命令（将key写入服务器节点）。

　　key2nodes是SSH::Batch提供的强大的的批量工具之一。其他工具还包括atnodes和tonodes。atnodes可以在目标集合上同步批量执行命令或者脚本。tonodes可以将文件批量上传到集群制定位置。

 　　像查看日志这种对系统安全危害小的，又常用的服务。既然可能多服务器终端交互，自然可以不用登陆跳板机，用一个网页形式来替我们完成这个功能，我们习惯上把这个叫做实时日志。这个可能公司内部的基础设施部门自己搭建。

　　更高逼格一点的基础设施就是日志中心了。

　　日志中心的架构思路各个公司间总体还是差不多的。我们磁盘上有日志，日志有一些通用格式。日志中心的进程会监控日志的变更，将增量通过消息队列收集到数据平台。数据平台进行数据计算，将计算结果可视化。现在所谓的大数据大多也是这种思路嘛。

　　除了上面说的本地磁盘手机之外，比较常用的收集方式还有SDK上报和APP端上报。对java来说，现在比较流行的日志组件有原生的log4j2、logback。还有scribe-log4j2来自定义ScribeAppender。还有日志格式化工具Xmd-log4j2。

　　比较简单的实现思路上：消息队列用kafka，上传到ES集群，建立索引后，用kibana做可视化。我们作为使用的业务方来说，除了简单了解架构，按照文档进行相应的配置之外，还需要了解DSL(Domain Specific Languae),即领域专用语言。如果使用ES的话，这个DSL就是ES的语法。